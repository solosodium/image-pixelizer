/* pixelizer.min.js */
var Pixelizer=Pixelizer||{};Pixelizer.Config={},Pixelizer.Log=function(){},Pixelizer.Log.debug=function(t){console.log("Pixelizer log: ",t)},Pixelizer.Log.throw=function(t){throw"Pixelizer exception: "+t},Pixelizer.Draw=function(t,i){this.canvas=t,this.ctx=t.getContext("2d"),this.points=[],this.options={},this.setOptions(i),this.clear()},Pixelizer.Draw.prototype.start=function(t){this.points=[],this.points.push({pos:t,options:this.options}),this.ctx.beginPath()},Pixelizer.Draw.prototype.draw=function(t){if(this.points.push({pos:t,options:this.options}),2<this.points.length){var i=this.points.length-1;this.ctx.strokeStyle=this.options.color,this.ctx.lineWidth=this.canvas.height*this.options.size,this.ctx.moveTo(this.points[i-1].pos.x,this.points[i-1].pos.y),this.ctx.lineTo(this.points[i].pos.x,this.points[i].pos.y),this.ctx.stroke()}},Pixelizer.Draw.prototype.end=function(t){this.points.push({pos:t,options:this.options}),this.points=[]},Pixelizer.Draw.prototype.setOptions=function(t){this.options={color:t.color,size:t.size,pixelX:t.pixelX,pixelY:t.pixelY}},Pixelizer.Draw.prototype.clear=function(){var t="#ffffff",i="#e0e0e0";this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=1,this.ctx.strokeStyle=t,this.ctx.fillStyle=t,this.ctx.stroke(),this.ctx.fill();for(var e=this.canvas.width/this.options.pixelX,s=this.canvas.height/this.options.pixelY,n=0;n<=this.options.pixelX;n++)for(var o=0;o<=this.options.pixelY;o++)(n+o)%2==0&&(this.ctx.beginPath(),this.ctx.rect(n*e,o*s,e,s),this.ctx.lineWidth=1,this.ctx.strokeStyle=i,this.ctx.fillStyle=i,this.ctx.stroke(),this.ctx.fill())},function(){Pixelizer.Log;function s(t,i){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}function n(t,i){var e=t.getBoundingClientRect();if(0<i.touches.length)return{x:i.touches[0].clientX-e.left,y:i.touches[0].clientY-e.top}}Pixelizer.Input=function(i,e){this.isPointer=!1,i.addEventListener("mousedown",function(t){this.isPointer=!0,e.start(s(i,t))}),i.addEventListener("mouseup",function(t){this.isPointer&&(this.isPointer=!1,e.end(s(i,t)))}),i.addEventListener("mouseleave",function(t){this.isPointer&&(this.isPointer=!1,e.end(s(i,t)))}),i.addEventListener("mousemove",function(t){this.isPointer&&e.draw(s(i,t))}),i.addEventListener("touchstart",function(t){this.isPointer=!0,e.start(n(i,t))}),i.addEventListener("touchend",function(t){this.isPointer&&(this.isPointer=!1,e.end(n(i,t)))}),i.addEventListener("touchmove",function(t){this.isPointer&&e.draw(n(i,t))})}}(),Pixelizer.Renderer=function(t,i){this.canvas=document.getElementById(t);var e=new Pixelizer.Draw(canvas,i);new Pixelizer.Input(canvas,e)};